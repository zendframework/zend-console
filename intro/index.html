<!DOCTYPE html>
<html lang="en">


<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Zend\Console">  
    <link rel="shortcut icon" href="../img/favicon.ico">

    <title>Introduction - zend-console</title>

    <link rel="stylesheet" href="../css/styles-18b942728f.css">
</head>
<body id="page-top">

    
    <div class="navbar navbar-default" role="navigation">
    <div class="container">
        <div class="navbar-header">

            
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            
            <span class="navbar-brand">
                <a class="logo-link" href="https://framework.zend.com/" data-tooltip data-placement="bottom" title="Go to the ZF homepage">
                    <img src="../img/zend-framework-logo.svg" height="28" alt="Zend Framework">
                </a>
            </span>
        </div>

        <div class="navbar-collapse collapse">

            
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="https://framework.zend.com/about">About</a>
                </li>
                <li>
                    <a href="https://framework.zend.com/downloads">Install</a>
                </li>
                <li class="active">
                    <a href="https://docs.zendframework.com">Documentation</a>
                </li>
                <li>
                    <a href="https://www.zend.com/en/services/training">Training</a>
                </li>
                <li>
                    <a href="https://framework.zend.com/blog">Blog</a>
                </li>
                <li>
                    <a href="https://framework.zend.com/participate">Participate</a>
                </li>
            </ul>

            
            
                <div class="nav navbar-nav navbar-collapse visible-xs-block ">
                    
    <div class="subnavigation hidden-print">
        <h4 class="subnavigation__title">
            <a href="..">zend-console</a>
        </h4>

        <h5 class="subnavigation__subtitle">Table of Contents</h5>

        <ul class="subnavigation__list">
            
                
                    <li class="subnavigation__list-item subnavigation__list-item--active">
                        <a href="./" class="subnavigation__link">Introduction</a>
                    </li>
                
            
                
                    <li class="subnavigation__list-item">
                        <span class="subnavigation__headline">Reference</span>
                        <ul class="subnavigation__list">
                            
                                
    <li class="subnavigation__list-item ">
        <a href="../adapter/" class="subnavigation__link">Console Adapters</a>
    </li>

                            
                                
    <li class="subnavigation__list-item ">
        <a href="../prompts/" class="subnavigation__link">Console Prompts</a>
    </li>

                            
                                
    <li class="subnavigation__list-item ">
        <a href="../routes/" class="subnavigation__link">Routes</a>
    </li>

                            
                        </ul>
                    </li>
                
            
                
                    <li class="subnavigation__list-item">
                        <span class="subnavigation__headline">MVC Integration</span>
                        <ul class="subnavigation__list">
                            
                                
    <li class="subnavigation__list-item ">
        <a href="../mvc/routing/" class="subnavigation__link">MVC Routing</a>
    </li>

                            
                                
    <li class="subnavigation__list-item ">
        <a href="../mvc/modules/" class="subnavigation__link">Console-Aware Modules</a>
    </li>

                            
                                
    <li class="subnavigation__list-item ">
        <a href="../mvc/controllers/" class="subnavigation__link">Console-Aware Controllers</a>
    </li>

                            
                        </ul>
                    </li>
                
            
                
                    <li class="subnavigation__list-item">
                        <span class="subnavigation__headline">Getopt</span>
                        <ul class="subnavigation__list">
                            
                                
    <li class="subnavigation__list-item ">
        <a href="../getopt/intro/" class="subnavigation__link">Introduction</a>
    </li>

                            
                                
    <li class="subnavigation__list-item ">
        <a href="../getopt/rules/" class="subnavigation__link">Declaring Rules</a>
    </li>

                            
                                
    <li class="subnavigation__list-item ">
        <a href="../getopt/fetching/" class="subnavigation__link">Fetching Options and Arguments</a>
    </li>

                            
                                
    <li class="subnavigation__list-item ">
        <a href="../getopt/configuration/" class="subnavigation__link">Configuration</a>
    </li>

                            
                        </ul>
                    </li>
                
            
        </ul>
    </div>

                </div>
            

            
            <div class="nav navbar-nav navbar-collapse visible-xs-block">
                <div class="component-selector">
    <h4 class="component-selector__title">Components</h4>
    <h5 class="component-selector__subtitle">Find documentation…</h5>
    <select class="form-control component-selector__control">
        <option value="/">Overview</option>
        <optgroup label="Components"></optgroup>
    </select>
</div>
            </div>
        </div>
    </div>
</div>

    
    <header class="header">
    <div class="container">
        <div class="row">

            
            <div class="col-xs-8">
                <h1 class="header__title">
                    Documentation

                    
                        <small class="header__subtitle">zend-console</small>
                    
                </h1>
            </div>

            
            <div class="col-xs-4 text-right">
                
                    <a href="#" class="header__link header__link--search" data-toggle="modal" data-target="#mkdocs_search_modal" title="Open search">
                        <i class="fa fa-search"></i> Search
                    </a>
                    <a href="https://github.com/zendframework/zend-console/" class="header__link header__link--github" title="Go to repository of zend-console">
                        <i class="fa fa-github"></i> GitHub
                    </a>
                
            </div>
        </div>
    </div>
</header>

    
    <div class="laminas-announcement">
    <div class="container">
        <div class="row">
            <div class="col-xs-12">
                Zend Framework transitions to the Linux Foundation. <a href="https://getlaminas.org">Learn More.</a>
            </div>
        </div>
    </div>
</div>

    
    <div class="container">
        <div class="row">
            <div class="col-md-9 col-xs-12 content" role="main">
            <!-- content:begin -->
                
                    <ol class="breadcrumb" role="navigation" aria-label="breadcrumbs navigation">
    <li><a href="https://framework.zend.com/">Home</a></li>

    
        <li><a href="https://docs.zendframework.com/">Documentation</a></li>

        
            <li><a href="..">zend-console</a></li>

            

            <li class="active">Introduction</li>
        
    
</ol>


    
    

    
    
        <div class="toc">
            <h6 class="toc__headline">In This Article</h6>
            <ul class="toc__list">
                
                    <li class="toc__entry">
                        <a href="#deprecated" class="toc__link">Deprecated</a>
                    </li>
                
                    <li class="toc__entry">
                        <a href="#quick-start-with-zend-mvc" class="toc__link">Quick Start with zend-mvc</a>
                    </li>
                
                    <li class="toc__entry">
                        <a href="#handling-console-requests" class="toc__link">Handling console requests</a>
                    </li>
                
                    <li class="toc__entry">
                        <a href="#adding-console-usage-info" class="toc__link">Adding console usage info</a>
                    </li>
                
            </ul>
        </div>
    


    <h1 id="introduction-to-zend-console">Introduction to zend-console</h1>
<blockquote>
<h3 id="deprecated">Deprecated</h3>
<p>Both the zend-console and the <a href="https://docs.zendframework.com/zend-mvc-console/">zend-mvc-console</a>
components will likely not be maintained long-term, as there are more complete
implementations available elsewhere. We strongly urge developers to start
migrating their console tooling to use other libraries, such as
<a href="https://github.com/symfony/console">symfony/console</a>.</p>
</blockquote>
<p>zend-console provides both generic support for routable console applications, as
well as the basis for adding console support to zend-mvc-based applications.</p>
<p>When a zend-mvc application is run from a console window (a shell window or
Windows command prompt), it will recognize this fact and prepare zend-mvc
components to handle the request. Console support is enabled by default, but to
function properly it requires at least one <a href="../routes/">console route</a> and one
<a href="http://framework.zend.com/manual/current/zend.mvc.controllers.html">action controller</a>
to handle the request.</p>
<p>Alternately, you can build console-aware applications that are standalone;
<a href="https://github.com/zfcampus/zf-console">zf-console</a> provides a standardized
workflow for doing so.</p>
<p>Features in zend-console include:</p>
<ul>
<li><a href="../routes/">Console routing</a> allows you to invoke handlers (including
  controller actions) depending on command line parameters provided by the user.</li>
<li><a href="../adapter/">Console adapters</a> provide abstraction for interacting with
  consoles exposed by different operating systems.</li>
<li><a href="../prompts/">Console prompts</a> allow user interaction by asking questions and
  retrieving input.</li>
</ul>
<p>When used with <a href="https://github.com/zendframework/zend-mvc">zend-mvc</a>, the
following features are also available:</p>
<ul>
<li><a href="../mvc/modules/">Module Manager integration</a> allows zend-mvc applications and
  modules to display help and usage information, either on demand, or in
  situations where no route was matched.</li>
<li><a href="../mvc/controllers/">Console-aware action controllers</a> will receive a console
  request containing all named parameters and flags. They are able to send
  output back to the console window.</li>
</ul>
<h2 id="quick-start-with-zend-mvc">Quick Start with zend-mvc</h2>
<blockquote>
<p>The following example details integration of zend-console with zend-mvc.
However, all information pertaining to routing can also be used <em>without</em>
zend-mvc, but requires that you react to the routing results yourself. The
aforementioned zf-console provides some basic wiring around that, and can and
should be consulted if you do not choose to use zend-console with zend-mvc.</p>
</blockquote>
<p>A console route defines required and optional command line parameters. When a
route matches, it returns an array of matched parameters &mdash; which may
include default parameters, or even parameters not exposed via the command line
(e.g., metadata related to the route).</p>
<p>Let's assume that we'd like our application to handle the following command line:</p>
<pre class="codehilite"><code class="language-bash">$ zf user resetpassword user@mail.com</code></pre>

<p>When a user runs our application (<code>zf</code>) with these parameters, we'd like to call
the action <code>resetpassword</code> of <code>Application\Controller\IndexController</code>.</p>
<blockquote>
<h3 id="the-zf-command">The zf command</h3>
<p>We will use <code>zf</code> to depict the entry point for your application; it can be
a shell script in the application's <code>bin/</code> directory, or simply an alias for <code>php
public/index.php</code>.</p>
</blockquote>
<p>First we need to create a <strong>route definition</strong>:</p>
<pre class="codehilite"><code>user resetpassword &lt;userEmail&gt;</code></pre>

<p>This simple route definition expects exactly three arguments: the literal
"user", the literal "resetpassword", and the dynamic argument we're calling
"userEmail". Let's assume we also accept one optional parameter to enable
verbose operation:</p>
<pre class="codehilite"><code>user resetpassword [--verbose|-v] &lt;userEmail&gt;</code></pre>

<p>The modified console route above expects the same three arguments from our
original example, but will also recognise an optional <code>--verbose</code> flag, or its
shorthand version, <code>-v</code>.</p>
<blockquote>
<h3 id="flag-order">Flag order</h3>
<p>The order of flags is ignored by zend-console. Flags can appear before
positional parameters, after them, or anywhere in between. The order of
multiple flags is also irrelevant. This applies both to route definitions and
the order that flags are used on the command line.</p>
</blockquote>
<p>Let's use the definition above and configure our console route. When using
zend-mvc, console routes are defined using the following configuration
structure:</p>
<pre class="codehilite"><code class="language-php">return [
    'router' =&gt; [
        'routes' =&gt; [
            // HTTP routes are defined here
        ],
    ],

    'console' =&gt; [
        'router' =&gt; [
            'routes' =&gt; [
                // Console routes go here
            ],
        ],
    ],

    /* ... */
];</code></pre>

<p>Let's create our console route and point it to
<code>Application\Controller\IndexController::resetpasswordAction()</code>:</p>
<pre class="codehilite"><code class="language-php">// We could define routes for Application\Controller\IndexController in
// the Application module config file, usually located at
// modules/application/config/module.config.php, or in one of the
// config/autoload/*.php files.
return [
    'console' =&gt; [
        'router' =&gt; [
            'routes' =&gt; [
                'user-reset-password' =&gt; [
                    'options' =&gt; [
                        'route'    =&gt; 'user resetpassword [--verbose|-v] &lt;userEmail&gt;',
                        'defaults' =&gt; [
                            'controller' =&gt; Application\Controller\Index::class,
                            'action'     =&gt; 'resetpassword',
                        ],
                    ],
                ],
            ],
        ],
    ],
    /* ... */
;</code></pre>

<h2 id="handling-console-requests">Handling console requests</h2>
<p>When a user runs our application from the command line and arguments match our
console route, the specified controller will be instantiated, and the specified
action method will be called, just as happens with zend-mvc HTTP requests.</p>
<p>As such, let's add the <code>resetpassword</code> action to our
<code>Application\Controller\IndexController</code>:</p>
<pre class="codehilite"><code class="language-php">&lt;?php
namespace Application\Controller;

use RuntimeException;
use Zend\Mvc\Controller\AbstractActionController;
use Zend\View\Model\ViewModel;
use Zend\Console\Request as ConsoleRequest;
use Zend\Math\Rand;

class IndexController extends AbstractActionController
{
    /* ... */

    public function resetpasswordAction()
    {
        $request = $this-&gt;getRequest();

        // Make sure that we are running in a console, and the user has not
        // tricked our application into running this action from a public web
        // server:
        if (! $request instanceof ConsoleRequest) {
            throw new RuntimeException('You can only use this action from a console!');
        }

        // Get user email from the console, and check if the user requested
        // verbosity:
        $userEmail   = $request-&gt;getParam('userEmail');
        $verbose     = $request-&gt;getParam('verbose') || $request-&gt;getParam('v');

        // Reset new password
        $newPassword = Rand::getString(16);

        // Fetch the user and change his password, then email him ...
        /* ... */

        if ($verbose) {
            return &quot;Done! New password for user $userEmail is '$newPassword'. &quot;
                . &quot;It has also been emailed to him.\n&quot;;
        }

        return &quot;Done! $userEmail has received an email with his new password.\n&quot;;

    }
}</code></pre>

<p>The above creates <code>resetpasswordAction()</code>, which:</p>
<ul>
<li>retrieves the current request;</li>
<li>checks if it's really coming from the console (as a precaution); in this
  example, we do not want our action to be invocable from a web page;</li>
<li>pulls console arguments via <code>$request-&gt;getParam()</code>; flags are represented by
  boolean values, where <code>true</code> means the flag was used, and <code>false</code> means
  otherwise;</li>
<li>performs work based on the arguments;</li>
<li>and finally returns a simple string to display to the user via the console.</li>
</ul>
<h2 id="adding-console-usage-info">Adding console usage info</h2>
<p>Console applications commonly display usage information when run without
arguments. The combination of zend-console and zend-mvc enables this out of the
box. Modules can provide usage information, and zend-console will query all loaded
modules for console usage information they expose.</p>
<p>Let's modify our <code>Application\Module</code> to provide usage info:</p>
<pre class="codehilite"><code class="language-php">&lt;?php

namespace Application;

use Zend\ModuleManager\Feature\AutoloaderProviderInterface;
use Zend\ModuleManager\Feature\ConfigProviderInterface;
use Zend\ModuleManager\Feature\ConsoleUsageProviderInterface;
use Zend\Console\Adapter\AdapterInterface as Console;

/**
 * Implementing ConsoleUsageProviderInterface allows the Module to provide
 * console usage information.
 */
class Module implements
    AutoloaderProviderInterface,
    ConfigProviderInterface,
    ConsoleUsageProviderInterface
{
    public function getConfig()
    {
        /* ... */
    }

    public function getAutoloaderConfig()
    {
        /* ... */
    }

    public function getConsoleUsage(Console $console)
    {
        return [
            // Describe available commands
            'user resetpassword [--verbose|-v] EMAIL' =&gt; 'Reset password for a user',

            // Describe expected parameters
            [ 'EMAIL',        'Email of the user for a password reset' ],
            [ '--verbose|-v', '(optional) turn on verbose mode'        ],
        ];
    }
}</code></pre>

<p>Each module that implements <code>ConsoleUsageProviderInterface</code> will be queried for
console usage info.  On route mismatch, all info from all modules will be
concatenated, formatted to console width, and shown to the user.</p>
<blockquote>
<h3 id="usage-order">Usage Order</h3>
<p>The order of usage info displayed in the console is in the same order in which
modules load. If you want your application to display important usage info
first, change the order your modules are loaded.</p>
</blockquote>



    <nav>
    <ul class="page-nav hidden-print">

        
        <li class="page-nav__item">
            
                <a rel="prev" class="page-nav__link page-nav__link--prev" href="..">
                    <i class="fa fa-chevron-left"></i> Previous
                </a>
            
        </li>

        
        <li class="page-nav__item">
            
                <a rel="next" class="page-nav__link page-nav__link--next" href="../adapter/">
                    Next <i class="fa fa-chevron-right"></i>
                </a>
            
        </li>
    </ul>
</nav>



    <div class="help-wanted">
        <p>
            Found a mistake or want to contribute to the documentation?
            <a href="https://github.com/zendframework/zend-console/edit/master/docs/book/intro.md" target="_blank" class="help-wanted__link">
                Edit this page on GitHub!
            </a>
        </p>
    </div>

                
            <!-- content:end -->
            </div>
            <div class="col-md-3 col-xs-12 sidebar">
                
                    <div class="component-selector">
    <h4 class="component-selector__title">Components</h4>
    <h5 class="component-selector__subtitle">Find documentation…</h5>
    <select class="form-control component-selector__control">
        <option value="/">Overview</option>
        <optgroup label="Components"></optgroup>
    </select>
</div>
                    
    <div class="subnavigation hidden-print">
        <h4 class="subnavigation__title">
            <a href="..">zend-console</a>
        </h4>

        <h5 class="subnavigation__subtitle">Table of Contents</h5>

        <ul class="subnavigation__list">
            
                
                    <li class="subnavigation__list-item subnavigation__list-item--active">
                        <a href="./" class="subnavigation__link">Introduction</a>
                    </li>
                
            
                
                    <li class="subnavigation__list-item">
                        <span class="subnavigation__headline">Reference</span>
                        <ul class="subnavigation__list">
                            
                                
    <li class="subnavigation__list-item ">
        <a href="../adapter/" class="subnavigation__link">Console Adapters</a>
    </li>

                            
                                
    <li class="subnavigation__list-item ">
        <a href="../prompts/" class="subnavigation__link">Console Prompts</a>
    </li>

                            
                                
    <li class="subnavigation__list-item ">
        <a href="../routes/" class="subnavigation__link">Routes</a>
    </li>

                            
                        </ul>
                    </li>
                
            
                
                    <li class="subnavigation__list-item">
                        <span class="subnavigation__headline">MVC Integration</span>
                        <ul class="subnavigation__list">
                            
                                
    <li class="subnavigation__list-item ">
        <a href="../mvc/routing/" class="subnavigation__link">MVC Routing</a>
    </li>

                            
                                
    <li class="subnavigation__list-item ">
        <a href="../mvc/modules/" class="subnavigation__link">Console-Aware Modules</a>
    </li>

                            
                                
    <li class="subnavigation__list-item ">
        <a href="../mvc/controllers/" class="subnavigation__link">Console-Aware Controllers</a>
    </li>

                            
                        </ul>
                    </li>
                
            
                
                    <li class="subnavigation__list-item">
                        <span class="subnavigation__headline">Getopt</span>
                        <ul class="subnavigation__list">
                            
                                
    <li class="subnavigation__list-item ">
        <a href="../getopt/intro/" class="subnavigation__link">Introduction</a>
    </li>

                            
                                
    <li class="subnavigation__list-item ">
        <a href="../getopt/rules/" class="subnavigation__link">Declaring Rules</a>
    </li>

                            
                                
    <li class="subnavigation__list-item ">
        <a href="../getopt/fetching/" class="subnavigation__link">Fetching Options and Arguments</a>
    </li>

                            
                                
    <li class="subnavigation__list-item ">
        <a href="../getopt/configuration/" class="subnavigation__link">Configuration</a>
    </li>

                            
                        </ul>
                    </li>
                
            
        </ul>
    </div>

                
            </div>
        </div>
    </div>

    
    <footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-9">
                <h5>Zend Framework</h5>
                <ul>
                    <li><a href="https://framework.zend.com/">framework.zend.com</a></li>
                    <li><a href="https://docs.zendframework.com">docs.zendframework.com</a></li>
                    <li><a href="https://packages.zendframework.com">packages.zendframework.com</a></li>
                    <li><a href="https://apigility.org">apigility.org</a></li>
                    <li><a href="https://getexpressive.org/">getexpressive.org</a></li>
                </ul>
            </div>
        </div>

        
        <div class="row">
            <div class="col-md-12 text-center">
                <a class="footer__button" href="#page-top"><i class="fa fa-chevron-up" aria-hidden="true"></i></a>
            </div>
        </div>

        <div class="row">

            
            <div class="col-md-9">
                <h4 class="footer__headline">Copyright</h4>
                <p>&copy; 2006-2018 by <a href="https://www.zend.com/">Zend</a>, a <a href="https://www.roguewave.com/">Rogue Wave Company</a>.</p>
            </div>

            
            <div class="col-md-3">
                <h4 class="footer__headline">Support</h4>
                <ul class="support__list">
                    <li class="support__list-item">
                        <a href="https://discourse.zendframework.com" class="support__link" title="Forum"><i class="fa fa-comments"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://zendframework-slack.herokuapp.com" class="support__link" title="Chat"><i class="fa fa-slack"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://github.com/zendframework" class="support__link" title="Github"><i class="fa fa-github"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://twitter.com/zfdevteam" class="support__link" title="Twitter"><i class="fa fa-twitter"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://tinyletter.com/mwopzend" class="support__link" title="Newsletter"><i class="fa fa-envelope"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://framework.zend.com/blog/feed-rss.xml" class="support__link" title="Blog feed"><i class="fa fa-rss"></i></a>
                    </li>
                    <li class="support__list-item">
                        <a href="https://framework.zend.com/security/feed" class="support__link" title="Security feed"><i class="fa fa-rss-square"></i></a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</footer>

    <script>
        var base_url = '..',
            siteName = 'zend-console';
    </script>
    <script src="../js/scripts-0bcb0a3bb3.js"></script>
        <script src="../search/require.js"></script>
        <script src="../search/search.js"></script>

    
    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">
                        <span aria-hidden="true">&times;</span>
                        <span class="sr-only">Close</span>
                    </button>
                    <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                </div>
                <div class="modal-body">
                    <p>
                        From here you can search these documents. Enter your search terms below.
                    </p>
                    <form role="form">
                        <div class="form-group">
                            <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                        </div>
                    </form>
                    <div id="mkdocs-search-results"></div>
                </div>
                <div class="modal-footer">
                </div>
            </div>
        </div>
    </div>



</body>


</html>
